import{k as z,d as P,r as y,l as w,c as E,a as b,t as u,p as m,b as r,w as n,q as U,F as C,G as F,i as d,o as q,E as h}from"./index-CaiRRUwe.js";const S=async v=>{const c=new FormData;return v.map(i=>{c.append(i.key,i.value)}),new Promise((i,g)=>{z.post("/user/",c,{},!1).then(e=>{(e==null?void 0:e.status)===201&&i(e)}).catch(e=>{g(e)})})},x={class:"title"},R={class:"sub-title"},B={class:"d-flex align-items-center gap-15 pt-10"},N={for:"privacyPolicyCheckbox",class:"cursor-pointer fs-12"},T=P({__name:"SignUp",setup(v){const c=F(),i=y(!1),g=y(),e=w({username:"",first_name:"",last_name:"",password:"",password_repeat:"",privacy_policy:!1}),k=w({username:[{required:!0,message:"Kullanıcı adı boş geçilemez!",trigger:"blur"},{min:3,max:64,message:"En az 3 en fazla 64 karakter belirlenmeli",trigger:"blur"}],first_name:[{required:!0,message:"İsim alanı boş geçilemez",trigger:"blur"},{min:3,max:64,message:"En az 3 en fazla 64 karakter belirlenmeli",trigger:"blur"}],last_name:[{required:!0,message:"Soyisim alanı boş geçilemez",trigger:"blur"},{min:3,max:64,message:"En az 3 en fazla 64 karakter belirlenmeli",trigger:"blur"}],password:[{required:!0,message:"Parola alanı boş geçilemez",trigger:"blur"},{min:3,max:16,message:"En az 3 en fazla 16 karakter belirlenmeli",trigger:"blur"}],password_repeat:[{required:!0,message:"Parola doğrulama alanı boş geçilemez",trigger:"blur"},{validator:(a,l,o)=>{console.log(a),l!==e.password?o(new Error("Şifreler eşleşmeli!")):o()},trigger:"blur"},{min:3,max:16,message:"En az 3 en fazla 16 karakter belirlenmeli",trigger:"blur"}],privacy_policy:[{validator:(a,l,o)=>{console.log(a),l?o():o(new Error("Bu alan seçilmeden ilerlenemez!!!"))},trigger:"change"}]}),V=async a=>{a&&await a.validate(async(l,o)=>{if(console.log(o),l){i.value=!0;const p=[{key:"username",value:e.username},{key:"first_name",value:e.first_name},{key:"last_name",value:e.last_name},{key:"password",value:e.password}];await S(p).then(t=>{g.value.resetFields(),h.success({title:"Kayıt olundu",dangerouslyUseHTMLString:!0,message:`Aramıza hoşgeldin <strong>${t.data.username}</strong>`,showClose:!1,onClose:()=>{c.push("/sign-in")}})}).catch(t=>{var f,_;(_=(f=t==null?void 0:t.response)==null?void 0:f.data)!=null&&_.username&&h.error({title:"Opps!!",message:t.response.data.username[0],showClose:!1})}).finally(()=>{i.value=!1})}})};return(a,l)=>{const o=d("router-link"),p=d("el-input"),t=d("el-form-item"),f=d("el-checkbox"),_=d("el-button"),$=d("el-form");return q(),E(C,null,[b("div",x,u(a.$t("login.sign_up")),1),b("div",R,[m(u(a.$t("login.have_an_account_exist"))+" ",1),r(o,{to:"/sign-in",class:"text-cute-green text-hover-so-cute-green ms-5"},{default:n(()=>[m(u(a.$t("login.sign_in")),1)]),_:1})]),r($,{ref_key:"ruleFormRef",ref:g,model:e,rules:k,onSubmit:l[6]||(l[6]=U(s=>V(g.value),["prevent"]))},{default:n(()=>[r(t,{prop:"username",label:a.$t("input.username")},{default:n(()=>[r(p,{modelValue:e.username,"onUpdate:modelValue":l[0]||(l[0]=s=>e.username=s),placeholder:a.$t("input.username")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(t,{prop:"first_name",label:a.$t("input.first_name")},{default:n(()=>[r(p,{modelValue:e.first_name,"onUpdate:modelValue":l[1]||(l[1]=s=>e.first_name=s),placeholder:a.$t("input.first_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(t,{prop:"last_name",label:a.$t("input.last_name")},{default:n(()=>[r(p,{modelValue:e.last_name,"onUpdate:modelValue":l[2]||(l[2]=s=>e.last_name=s),placeholder:a.$t("input.last_name")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(t,{prop:"password",label:a.$t("input.password")},{default:n(()=>[r(p,{modelValue:e.password,"onUpdate:modelValue":l[3]||(l[3]=s=>e.password=s),placeholder:a.$t("input.password_placeholder"),"show-password":!0},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(t,{prop:"password_repeat",label:a.$t("input.password_repeat")},{default:n(()=>[r(p,{modelValue:e.password_repeat,"onUpdate:modelValue":l[4]||(l[4]=s=>e.password_repeat=s),placeholder:a.$t("input.password_repeat"),"show-password":!0},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),b("div",B,[r(t,{prop:"privacy_policy"},{default:n(()=>[r(f,{id:"privacyPolicyCheckbox",modelValue:e.privacy_policy,"onUpdate:modelValue":l[5]||(l[5]=s=>e.privacy_policy=s),size:"large",class:"custom-checkbox"},null,8,["modelValue"])]),_:1}),b("label",N,[r(o,{to:"/target-page",class:"text-cute-green text-hover-main-purple"},{default:n(()=>[m(u(a.$t("login.terms_of_service")),1)]),_:1}),m(" "+u(a.$t("random.and"))+" ",1),r(o,{to:"/target-page",class:"text-cute-green text-hover-main-purple"},{default:n(()=>[m(u(a.$t("login.privacy_policy")),1)]),_:1}),m(" - "+u(a.$t("login.read_and_agree")),1)])]),r(_,{"native-type":"submit",class:"w-100 gradient-purple-btn text-white-o no-border",loading:i.value},{default:n(()=>[m(u(a.$t("login.sign_up")),1)]),_:1},8,["loading"])]),_:1},8,["model","rules"])],64)}}});export{T as default};
