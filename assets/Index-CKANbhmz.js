import{k as C,d as q,r as k,l as $,f as P,c as f,b as t,w as o,u as w,m as R,a,F as L,h as D,s as g,i as r,o as v,_ as V,n as T,t as b,p as h,q as j,E as G}from"./index-CaiRRUwe.js";const H=async p=>{const m=new FormData;return p.map(s=>{m.append(s.key,s.value)}),new Promise((s,d)=>{C.post("/list/movie/",m,{},!0).then(n=>{(n==null?void 0:n.status)===201&&s(n)}).catch(n=>{d(n)})})},I=async()=>new Promise((p,m)=>{C.get("/list/movie/",{},!0).then(s=>{(s==null?void 0:s.status)===200&&p(s.data)}).catch(s=>{m(s)})}),K={class:"my-lists-page-container flex-direction-column"},O={class:"card-list-column",style:{"background-color":"var(--main-purple-20)","margin-bottom":"1rem","border-radius":"1rem"}},X={class:"item-container"},J=["src"],Q={class:"item-info w-100"},W={class:"sub-main"},Y=a("span",{class:"writer-avatar"},[a("img",{src:"https://s3.amazonaws.com/www-inside-design/uploads/2019/03/featureuserpersona-810x810.jpg",alt:""})],-1),Z={class:"writer-name"},ee={class:"film-count"},te={class:"like"},se=a("span",null,"6.9K",-1),ae={class:"comment"},le=a("span",null,"90",-1),ne=q({__name:"Index",setup(p){const m="https://image.tmdb.org/t/p/w600_and_h900_bestv2",s=k(!1),d=k(!1),n=k(),i=$({listName:"",listDesc:"",private:"0"}),F=$({listName:[{required:!0,message:"Liste ismi boş geçilemez!",trigger:"blur"},{min:3,max:32,message:"En az 3 en fazla 32 karakter belirlenmeli",trigger:"blur"}],listDesc:[{min:3,max:120,message:"En az 3 en fazla 120 karakter belirlenmeli",trigger:"blur"}]}),A=async c=>{c&&await c.validate(async l=>{if(l){d.value=!0;const y=[{key:"name",value:i.listName},{key:"description",value:i.listDesc},{key:"private",value:i.private}];await H(y).then(u=>{u.status===201&&g.myLists.results.push(u.data),n.value.resetFields(),s.value=!1,G({title:"Tebrikler",message:"Liste başarılı bir şekilde oluşturuldu",type:"success"})}).catch(u=>{console.log(u)}).finally(()=>{d.value=!1})}})},E=async()=>{const c=await I();g.myLists=c};return P(()=>{E()}),(c,l)=>{const y=r("el-tooltip"),u=r("router-link"),N=r("el-input"),x=r("el-form-item"),z=r("el-radio"),S=r("el-radio-group"),U=r("el-button"),B=r("el-form"),M=r("el-dialog");return v(),f(L,null,[t(R,{title:c.$t("pages.my_lists"),count:w(g).myLists.count},{default:o(()=>[t(y,{effect:"dark",content:"Add New List",placement:"top"},{default:o(()=>[a("div",{class:"circle-icon light text-white-o ms-auto",onClick:l[0]||(l[0]=e=>s.value=!0)},[t(V,{icon:"plus-icon"})])]),_:1})]),_:1},8,["title","count"]),a("div",K,[(v(!0),f(L,null,D(w(g).myLists.results,e=>(v(),f("div",O,[a("div",X,[(v(),f(L,null,D(5,_=>a("img",{src:_-1<e.posters.length?w(m)+e.posters[_-1]:"/assets/img/no-img-holder.png",alt:"",style:T({left:`calc(${_} * -5rem)`,transform:"translateX(50%)","z-index":`${6-_}`})},null,12,J)),64))]),a("div",Q,[t(u,{to:`/my-lists/${e.slug}`,class:"main-title"},{default:o(()=>[a("h2",null,b(e.name),1)]),_:2},1032,["to"]),a("div",W,[t(u,{to:"/",class:"writer"},{default:o(()=>[Y,a("span",Z,b(e.user.username),1)]),_:2},1024),a("span",ee,b(e.movie_count===1?"1 film":e.movie_count===0?"No film":`${e.movie_count} films`),1),a("span",te,[t(V,{icon:"heart-icon"}),se]),a("span",ae,[t(V,{icon:"comment-icon-fill"}),le])]),t(u,{to:`/my-lists/${e.slug}`,class:"main-desc"},{default:o(()=>[h(b(e.description),1)]),_:2},1032,["to"])])]))),256))]),t(M,{modelValue:s.value,"onUpdate:modelValue":l[5]||(l[5]=e=>s.value=e),title:"Add New Custom List",class:"custom-dialog"},{default:o(()=>[t(B,{ref_key:"ruleFormRef",ref:n,model:i,rules:F,onSubmit:l[4]||(l[4]=j(e=>A(n.value),["prevent"]))},{default:o(()=>[t(x,{prop:"listName",label:"Liste İsmi"},{default:o(()=>[t(N,{modelValue:i.listName,"onUpdate:modelValue":l[1]||(l[1]=e=>i.listName=e),placeholder:"Liste İsmi"},null,8,["modelValue"])]),_:1}),t(x,{prop:"listDesc",label:"Liste Açıklaması"},{default:o(()=>[t(N,{modelValue:i.listDesc,"onUpdate:modelValue":l[2]||(l[2]=e=>i.listDesc=e),placeholder:"Liste Açıklaması"},null,8,["modelValue"])]),_:1}),t(S,{modelValue:i.private,"onUpdate:modelValue":l[3]||(l[3]=e=>i.private=e),class:"custom-radio"},{default:o(()=>[t(z,{value:"0",size:"large"},{default:o(()=>[h("Herkese Açık")]),_:1}),t(z,{value:"1",size:"large"},{default:o(()=>[h("Gizli")]),_:1})]),_:1},8,["modelValue"]),t(U,{"native-type":"submit",class:"w-100 gradient-purple-btn text-white-o no-border",loading:d.value},{default:o(()=>[h("Oluştur")]),_:1},8,["loading"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])],64)}}});export{ne as default};
